# Тестовое задание для ООО "Интеграти"
Оригинальный файл с тестовым заданием находится [здесь](https://docs.google.com/document/d/1KeLGq6_l9dPBSEpKcAQO16iPxO0G9G-Cy1CJ41QUsS8/).
## Задача 1
### Условие задачи
> Есть регистр `Продажи`. Измерение - `Клиент`, `Товар`. Ресурсы - `Количество`.
> 
> _Запросом получить всех клиентов, кто купил `товар А`, но не купил `товар B`_
> 
> ООО Ромашка  / Товар А
> ООО Ромашка  / Товар B
> ИП Иванов  / Товар B
> 
> Спр `Номенклатура`:
>  **Шкаф**, 
> **Стол**,
> **Стул**
> 
> Регистр `Продажи` - `Номенклатура` / `Количество`/`Сумма`
> 
> `Продажи`:
> Шкаф - 2 штуки
> Стул - 1 штука. 
> 
> Где Продажи.Количество is null
> 
> | Номенклатура.Ссылка | Продажи.Количество |
> | ------|--------|
> | Шкаф | 2 |
> | **Стол** | NULL |
> | **Стул** |  1 |
### Решение
#### Исходные данные: регистр оборотов "Продажи"
![KM3ZLKDqGn](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/1389cc9f-cfa4-48d3-b69c-092927dbe6a7)
#### Текст и параметры запроса
```
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ПродажиОбороты.Контрагент КАК Клиент,
	ПродажиОбороты.Номенклатура КАК Товар,
	ПродажиОбороты.КоличествоОборот КАК Продано
ПОМЕСТИТЬ ВТ_ПродажиТовараА
ИЗ
	РегистрНакопления.Продажи.Обороты(, , , Номенклатура = &ТоварА) КАК ПродажиОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ПродажиОбороты.Контрагент КАК Клиент,
	ПродажиОбороты.Номенклатура КАК Товар,
	ПродажиОбороты.КоличествоОборот КАК Продано
ПОМЕСТИТЬ ВТ_ПродажиТовараВ
ИЗ
	РегистрНакопления.Продажи.Обороты(, , , Номенклатура = &ТоварВ) КАК ПродажиОбороты
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_ПродажиТовараА.Клиент КАК Клиент
ИЗ
	ВТ_ПродажиТовараА КАК ВТ_ПродажиТовараА
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ПродажиТовараВ КАК ВТ_ПродажиТовараВ
		ПО ВТ_ПродажиТовараА.Клиент = ВТ_ПродажиТовараВ.Клиент
ГДЕ
	ВТ_ПродажиТовараВ.Клиент ЕСТЬ NULL
```
![2023-11-20_15-51](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/9465b44f-78d8-4aef-a021-3c5a0c53d627)
![2023-11-20_15-52](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/5c600b5d-7220-4c63-a399-697e44d219d5)

#### Результаты тестирования
![2023-11-20_15-58](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/1cfc92f4-658d-4584-a530-c810c0a2e7fd)
## Задача 2
### Условие задачи
> Есть таблица значений с полями `Контрагент` и `Сумма`. Напишите процедуру, которая удалит из таблицы все строки, с `суммой` меньше 100 рублей
## Задача 3
### Условие задачи
> В конфигурации есть регистр сведений `Производственный календарь`. Измерение - `Дата`, ресурс - `Рабочий день(булево)`, `Истина` - если день рабочий, иначе - `Ложь`.
> 
> Реализовать функцию, которая прибавляет `X` рабочих Дней к исходной дате.
## Задача 4
### Условие задачи
> Напишете текст запроса (одним запросом) для получения `курса валюты` из периодического (периодичность `день`) регистра сведений «`Курсы валют`» для документов «`Поступление`» на дату каждого документа.
>
> Регистр сведений «Курсы валют»:
>  | Дата | Валюта | Курс |
> |------|------|-----|
> |01.01.2010|Валюта 1|1|
> |01.01.2010|Валюта 2|10|
> |03.01.2010|Валюта 2|5|
> |...|||
> 
> Документы "Поступление":
>  |Дата|Номер|Валюта|
> |------|------|-----|
> |02.01.2010 16:30|1|Валюта 1|
> |02.01.2010 17:00|2|Валюта 2|
> |03.01.2010 20:00|3|Валюта 1|
> |...|||
## Задача 5
### Условие задачи
> _Получить продажи помесячно нарастающим итогом._
> 
> Например. Контрагент “Рога и копыта” купил в январе на 100 рублей, в феврале на 50 рублей, в марте ничего не купил , в апреле на  100  рублей
> Тогда запрос должен вернуть таблицу вида
> |Контрагент |Период | Сумма нарастающим итогом с начала года |
> |-----|------|-------|
> |Рога и копыта|||
> ||Январь 2020|100|
> ||Февраль 2020|150|
> ||Март 2020|150|
> ||Апрель 2020|250|
### Решение
"Классическим" решением задачи с нарастающим итогом является внутреннее соединение таблицы сама с собой. Соединение идет по полям `Период` и `Контрагент`.
#### Исходные данные: регистр оборотов "Продажи"
Регистр оборотов "Продажи" предствлен на скриншоте [выше](https://github.com/anton-petrunov/1C-intgraty-test/tree/dev/README.md#исходные-данные-регистр-оборотов-продажи)
#### Текст и параметры запроса
```
ВЫБРАТЬ
	ПродажиОбороты.Контрагент КАК Контрагент,
	ПродажиОбороты.Период КАК Период,
	ПродажиОбороты.СуммаОборот КАК ПродажиЗаМесяц,
	СУММА(ПродажиОборотыДляИтога.СуммаОборот) КАК ПродажиНарастающимИтогом
ИЗ
	РегистрНакопления.Продажи.Обороты(, , Месяц, ) КАК ПродажиОбороты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.Продажи.Обороты(, , Месяц, ) КАК ПродажиОборотыДляИтога
		ПО ПродажиОбороты.Период >= ПродажиОборотыДляИтога.Период
			И ПродажиОбороты.Контрагент = ПродажиОборотыДляИтога.Контрагент

СГРУППИРОВАТЬ ПО
	ПродажиОбороты.Период,
	ПродажиОбороты.СуммаОборот,
	ПродажиОбороты.Контрагент

УПОРЯДОЧИТЬ ПО
	ПродажиОбороты.Контрагент,
	ПродажиОбороты.Период
```
![2023-11-21_14-12](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/ed6c1cea-f55c-4e46-aef4-03294c59c2fe)
#### Результаты тестирования
![2023-11-21_14-13](https://github.com/anton-petrunov/1C-intgraty-test/assets/97449490/3fd6fbee-a3d6-4306-a8d1-35c776bd45ad)
